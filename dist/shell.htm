<template id="shell-actions">
    <section class="ge ge-actions">
        <div class="pull-left">
            <button type="button" class="btn btn-default" @click="trigger('push')">
                <span class="glyphicon glyphicon-cloud-upload"></span>
                <span>Store Changes</span>
            </button>
            <button type="button" class="btn btn-default" @click="trigger('pull')">
                <span class="glyphicon glyphicon-cloud-download"></span>
                <span>Discard Changes</span>
            </button>
        </div>
        <div class="pull-right">

            <button type="button" class="btn btn-default" @click="zoom('in')">
                <span class="glyphicon glyphicon-zoom-in"></span>
                <span>Zoom in</span>
            </button>
            <button type="button" class="btn btn-default" @click="zoom('out')">
                <span class="glyphicon glyphicon-zoom-out"></span>
                <span>Zoom out</span>
            </button>


            <!--
            <button type="button" class="btn btn-default">Page Settings</button>
            <button type="button" class="btn btn-default">Add Source</button>
            -->
        </div>
    </section>
</template>

<template id="shell-brand">
    <section class="ge ge-brand">
        <a href="#"></a>
    </section>
</template>

<template id="shell-categories">
    <section class="ge ge-categories">
        <div v-for="category in categories">
            <h5>
                <span>{{ category.title }}</span>
            </h5>
            <ul class="nav nav-pills nav-stacked">
                <li v-for="item in category.categories" :class="{ 'active': item == globals.selection.category }"><a href="#" @click="trigger('selectCategory', item)">{{ item.title }}</a></li>
            </ul>
        </div>
    </section>
</template>

<template id="shell-container">

    <section class="ge ge-container">
        <shell-page
            :globals.sync="globals"
            :settings.sync="settings"
            :page.sync="page"
            :items.sync="page.widgets"
        ></shell-page>
    </section>

</template>

<template id="shell-domains">
    <section class="ge ge-panel ge-domains">
        <domains :items.sync="domains" :globals.sync="globals" inline-template>
            <h5>
                <span>Domains</span>
                <span class="ge ge-overlays">
                    <span class="ge ge-overlay" @click="create({ title: {}, resource: { params: [] }})"><span class="glyphicon glyphicon-plus-sign"></span></span>
                </span>
            </h5>
            <ul class="nav nav-pills nav-stacked">
                <li v-for="item in items" v-show="item._action != 'remove'" :class="{ 'active': item == globals.selection.domain }">
                    <a href="#" @click="trigger('selectDomain', item)">
                        <span>{{ item.name }}</span>
                        <span class="ge ge-overlays">
                            <span class="ge ge-overlay" @click.stop="remove(item)"><span class="glyphicon glyphicon-trash"></span></span>
                            <span class="ge ge-overlay" @click.stop="update(item)"><span class="glyphicon glyphicon-edit"></span></span>
                        </span>
                    </a>
                </li>
            </ul>
        </domains>
    </section>
</template>

<template id="shell-decorator-canvas">
    <div class="ge ge-widget" :class="{ 'ge-widget-selected': selected }">
        <div class="ge ge-content">
            <default-stack-canvas
                :globals.sync="globals"
                :page.sync="page"
                :data.sync="data"
                :storage.sync="storage"
                :children.sync="children"
                :editable.sync="true"
            ></default-stack-canvas>
        </div>
    </div>
</template>

<template id="shell-decorator-horisontal">
    <div class="ge ge-widget" :class="{ 'ge-widget-selected': selected, 'ignore-elements': editable }">
        <div class="ge ge-content">
            <div
                :is="widget.tag"
                v-ref:widget
                :page.sync="page"
                :data.sync="data"
                :storage.sync="storage"
                :bindings.sync="bindings"
                :children.sync="children"
                :editable.sync="selected"
            ></div>
        </div>
        <div class="ge ge-overlay" v-if="$route.private && editable">
            <div class="ge ge-overlay-left">
                <a href="#" v-if="!selected" @click.stop.prevent="selectTarget()" class="label label-success">Unlock</a>
                <a href="#" v-if="selected" @click.stop.prevent="unselectTarget()" class="label label-success">Lock</a>
            </div>
            <div class="ge ge-overlay-right">
                <a href="#" v-if="!selected" @click.stop.prevent="showSettings()" class="label label-primary">Settings</a>
                <a href="#" v-if="!selected" @click.stop.prevent="removeWidget()" class="label label-danger">Remove</a>
            </div>
        </div>
    </div>
</template>

<template id="shell-decorator-stub">
    <div class="ge ge-widget">
        <div class="ge ge-content">
            <div
                :is="widget.tag"
                v-ref:widget
                :page.sync="page"
                :data.sync="data"
                :storage.sync="storage"
                :bindings.sync="bindings"
                :children.sync="children"
            ></div>
        </div>
    </div>
</template>

<template id="shell-decorator-vertical">
    <div class="ge ge-widget" :class="{ 'ge-widget-selected': selected, 'ignore-elements': editable }">
        <div class="ge ge-content">
            <div
                :is="widget.tag"
                v-ref:widget
                :page.sync="page"
                :data.sync="data"
                :storage.sync="storage"
                :bindings.sync="bindings"
                :children.sync="children"
                :editable.sync="selected"
            ></div>
        </div>
        <div class="ge ge-overlay" v-if="$route.private && editable">
            <div class="ge ge-overlay-left">
                <a href="#" v-if="!selected" @click.stop.prevent="selectTarget()" class="label label-success">Unlock</a>
                <a href="#" v-if="selected" @click.stop.prevent="unselectTarget()" class="label label-success">Lock</a>
            </div>
            <div class="ge ge-overlay-right">
                <a href="#" v-if="!selected" @click.stop.prevent="showSettings()" class="label label-primary">Settings</a>
                <a href="#" v-if="!selected" @click.stop.prevent="removeWidget()" class="label label-danger">Remove</a>
            </div>
        </div>
    </div>
</template>

<template id="shell-decorator-widget">
    <div class="ge ge-widget">
        <div class="ge ge-content">
            <div
                :is="widget.tag"
                v-ref:widget
                :page.sync="page"
                :data.sync="data"
                :storage.sync="storage"
                :bindings.sync="bindings"
                :children.sync="children"
            ></div>
        </div>
        <div class="ge ge-overlay" v-if="$route.private && editable">
            <div class="ge ge-overlay-right">
                <a href="#" v-if="editable" @click.stop.prevent="showSettings()" class="label label-primary">Settings</a>
                <a href="#" v-if="editable" @click.stop.prevent="removeWidget()" class="label label-danger">Remove</a>
            </div>
        </div>
    </div>
</template>

<template id="shell-loader">
    <div class="ge ge-shell-loader">
        <shell-private v-if="portal != null"
            :settings="settings"
            :model="portal"
        ></shell-private>
    </div>
</template>

<template id="shell-pages">
    <section class="ge ge-panel ge-pages">
        <pages :items.sync="pages" :globals.sync="globals" inline-template>
            <h5>
                <span>Pages</span>
                <span class="ge ge-overlays">
                    <span class="ge ge-overlay" @click="create({ title: {}, resource: { params: [] }, sources: [], storages: [], widgets: [], metas: []})"><span class="glyphicon glyphicon-plus-sign"></span></span>
                </span>
            </h5>
            <ul class="nav nav-pills nav-stacked">
                <li v-for="item in items" v-show="item._action != 'remove'" :class="{ 'active': item == globals.selection.page }">
                    <a href="#" @click="trigger('selectPage', item)">
                        <span v-if="item.name != ''">{{ item.name }}</span>
                        <span v-if="item.name == ''"><i>default</i></span>
                        <span class="ge ge-overlays">
                            <span v-if="item.name != ''" class="ge ge-overlay" @click.stop="remove(item)"><span class="glyphicon glyphicon-trash"></span></span>
                            <span class="ge ge-overlay" @click.stop="update(item)"><span class="glyphicon glyphicon-edit"></span></span>
                        </span>
                    </a>
                </li>
            </ul>
        </pages>
    </section>
</template>

<template id="shell-page">

    <div class="ge ge-page" :style="{
        'width': pageSettings.width,
    }">
        <div
            :is="decorator"
            :globals.sync="globals"
            :settings.sync="settings"
            :page.sync="page"
            :data.sync="data"
            :storage.sync="storage"
            :items.sync="page.widgets"
        ></div>
    </div>

</template>

<template id="shell-palette-item">
    <div class="ge ge-palette-item">
        <div data-widget="{{ widget.id }}">
            <img class="when-in-palette" :src="thumbnail" />
        </div>
    </div>
</template>

<template id="shell-palette">
    <section class="ge ge-palette">
        <div class="ge ge-palette-selector">
            <div class="dropdown">
                <button class="btn btn-palette dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    {{ globals.selection.category.title }} <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li v-for="category in categories"><a @click.prevent="trigger('selectCategory', category)">{{ category.title }}</a></li>
                </ul>
            </div>
        </div>
        <div class="ge ge-palette-categories" v-scrollable>
            <div v-for="c in category.categories" class="ge ge-palette-category">
                <div class="ge ge-category-title">{{ c.title }}</div>
                <div class="ge ge-category-palette">
                    <palette-item v-for="widget in c.widgets" :widget.sync="widget"></palette-item>
                </div>
            </div>
        </div>
    </section>
</template>

<template id="shell-sources">
    <section class="ge ge-panel ge-sources">
        <pages-sources :items.sync="sources" :globals.sync="globals" inline-template>
            <h5>
                <span>Sources</span>
                <span class="ge ge-overlays">
                    <span class="ge ge-overlay" @click="create({ schema: 'petstore', method: 'GET', params: [] })"><span class="glyphicon glyphicon-plus-sign"></span></span>
                </span>
            </h5>
            <ul class="nav nav-pills nav-stacked">
                <li v-for="item in items" v-show="item._action != 'remove'" :class="{ 'active': item == globals.selection.source }">
                    <a href="#" @click="trigger('selectSource', item)">
                        <span>{{ item.name }}</span>
                        <span class="ge ge-overlays">
                            <span class="ge ge-overlay" @click.stop="remove(item)"><span class="glyphicon glyphicon-trash"></span></span>
                            <span class="ge ge-overlay" @click.stop="update(item)"><span class="glyphicon glyphicon-edit"></span></span>
                        </span>
                    </a>
                </li>
            </ul>
        </pages-sources>
    </section>
</template>

<template id="shell-private">
    <div class="ge ge-shell ge-shell-private">
        <div class="ge ge-head">
            <shell-brand
                :model.sync="model"
                :globals.sync="globals"
            ></shell-brand>
        </div>
        <div class="ge ge-body">
            <div class="ge ge-body-table">
                <div class="ge ge-nav" v-scrollable>
                    <div class="ge ge-hover">
                        <div class="ge ge-hover-button">
                            <span class="glyphicon glyphicon-th"></span>
                            Palette
                        </div>
                    </div>
                    <div class="ge ge-subnav">
                        <shell-palette
                            :categories.sync="settings.categories"
                            :category.sync="globals.selection.category"
                            :globals.sync="globals"
                        ></shell-palette>
                    </div>
                </div>
                <div class="ge ge-editor" v-scrollable>
                    <shell-actions
                        :model.sync="model"
                        :globals.sync="globals"
                    ></shell-actions>
                    <shell-container
                        :globals.sync="globals"
                        :settings.sync="settings"
                        :page.sync="globals.selection.page"
                    ></shell-container>
                </div>
                <div class="ge ge-structure" v-scrollable>
                    <shell-pages
                        :pages.sync="model.pages"
                        :globals.sync="globals"
                    ></shell-pages>
                    <shell-sources
                        :sources.sync="globals.selection.page.sources"
                        :globals.sync="globals"
                    ></shell-sources>
                    <shell-storages
                        :storages.sync="globals.selection.page.storages"
                        :globals.sync="globals"
                    ></shell-storages>
                </div>
            </div>
        </div>
        <div class="ge ge-foot">
        </div>
    </div>
</template>

<template id="shell-public">
    <div class="ge ge-shell ge-shell-public">
        <shell-page
            :globals.sync="globals"
            :settings.sync="settings"
            :page.sync="page"
            :items.sync="page.widgets"
        ></shell-page>
    </div>
</template>

<template id="shell-stacked">
    <div class="ge ge-stacked"
        ><shell-widget v-for="item in items" v-if="item._action != 'remove'"
            :globals.sync="globals"
            :settings.sync="settings"
            :stack.sync="page"
            :page.sync="page"
            :data.sync="item"
        ></shell-widget
    ></div>
</template>

<template id="shell-storages">
    <section class="ge ge-panel ge-storages">
        <storages :items.sync="storages" :globals.sync="globals" inline-template>
            <h5>
                <span>Storages</span>
                <span class="ge ge-overlays">
                    <span class="ge ge-overlay" @click="create({ variables: [] })"><span class="glyphicon glyphicon-plus-sign"></span></span>
                </span>
            </h5>
            <ul class="nav nav-pills nav-stacked">
                <li v-for="item in items" v-show="item._action != 'remove'" :class="{ 'active': item == globals.selection.storage }">
                    <a href="#" @click="trigger('selectStorage', item)">
                        <span>{{ item.name }}</span>
                        <span class="ge ge-overlays">
                            <span class="ge ge-overlay" @click.stop="remove(item)"><span class="glyphicon glyphicon-trash"></span></span>
                            <span class="ge ge-overlay" @click.stop="update(item)"><span class="glyphicon glyphicon-edit"></span></span>
                        </span>
                    </a>
                </li>
            </ul>
        </storages>
    </section>
</template>

<template id="shell-target">
    <div class="ge ge-target">
        <span>Drop Here</span>
    </div>
</template>

<template id="shell-stub">
    <div class="ge ge-stub">
        <span>Stub</span>
    </div>
</template>

<template id="shell-widget">
    <div>
        <div
            :is="decorator"
            :globals.sync="globals"
            :settings.sync="settings"
            :page.sync="page"
            :data.sync="data"
            :storage.sync="storage"
            :model.sync="model"
            :widget.sync="widget"
            :editable.sync="editable"
            :items.sync="model.widgets"
        ></div>
    </div>
</template>
